
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../control-the-apps/">
      
      
      <link rel="icon" href="../images/Logo.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.23">
    
    
      
        <title>Configure a server - CAMEO</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="orange" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configure-a-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CAMEO" class="md-header__button md-logo" aria-label="CAMEO" data-md-component="logo">
      
  <img src="../images/Logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CAMEO
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configure a server
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CAMEO" class="md-nav__button md-logo" aria-label="CAMEO" data-md-component="logo">
      
  <img src="../images/Logo.png" alt="logo">

    </a>
    CAMEO
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to CAMEO
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Configure a server
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Configure a server
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-main-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      The main configuration file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-files" class="md-nav__link">
    <span class="md-ellipsis">
      Environment files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#log" class="md-nav__link">
    <span class="md-ellipsis">
      Log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-server" class="md-nav__link">
    <span class="md-ellipsis">
      Start the server
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registered-and-unregistered-apps" class="md-nav__link">
    <span class="md-ellipsis">
      Registered and unregistered apps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registered and unregistered apps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#this-initialized-with-the-arguments-variable" class="md-nav__link">
    <span class="md-ellipsis">
      This initialized with the arguments variable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#this-initialized-with-explicit-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      This initialized with explicit arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#this-not-initialized" class="md-nav__link">
    <span class="md-ellipsis">
      This not initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registered-vs-unregistered" class="md-nav__link">
    <span class="md-ellipsis">
      Registered vs unregistered
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#register-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Register a script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ports" class="md-nav__link">
    <span class="md-ellipsis">
      Ports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stop-and-error-executables" class="md-nav__link">
    <span class="md-ellipsis">
      Stop and error executables
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../control-the-apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control the apps
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../make-the-apps-communicate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Make the apps communicate
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../synchronization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synchronization
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../track-the-app-failures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Track the app failures
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-the-proxies-with-a-firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use the proxies with a firewall
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../developments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developments
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-main-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      The main configuration file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-files" class="md-nav__link">
    <span class="md-ellipsis">
      Environment files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#log" class="md-nav__link">
    <span class="md-ellipsis">
      Log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-server" class="md-nav__link">
    <span class="md-ellipsis">
      Start the server
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registered-and-unregistered-apps" class="md-nav__link">
    <span class="md-ellipsis">
      Registered and unregistered apps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registered and unregistered apps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#this-initialized-with-the-arguments-variable" class="md-nav__link">
    <span class="md-ellipsis">
      This initialized with the arguments variable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#this-initialized-with-explicit-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      This initialized with explicit arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#this-not-initialized" class="md-nav__link">
    <span class="md-ellipsis">
      This not initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registered-vs-unregistered" class="md-nav__link">
    <span class="md-ellipsis">
      Registered vs unregistered
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#register-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Register a script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ports" class="md-nav__link">
    <span class="md-ellipsis">
      Ports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stop-and-error-executables" class="md-nav__link">
    <span class="md-ellipsis">
      Stop and error executables
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="configure-a-server">Configure a server</h1>
<h2 id="the-main-configuration-file">The main configuration file</h2>
<p>The main configuration file of a CAMEO server is an XML file usually called <em>config.xml</em> but the name is not imposed. We already saw a minimal example where no application were registered. Let's discover the different options. </p>
<p>Let's take an example with two applications registered:
<div class="language-xml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">&lt;config</span><span class="w"> </span><span class="na">host=</span><span class="s">&quot;mycomputer&quot;</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;7000&quot;</span><span class="w"> </span><span class="na">proxy_ports=</span><span class="s">&quot;10000, 10001, 10002&quot;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="na">polling_time=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">sleep_time=</span><span class="s">&quot;10&quot;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="na">max_applications=</span><span class="s">&quot;20&quot;</span><span class="w"> </span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="na">log_level=</span><span class="s">&quot;FINE&quot;</span><span class="w"> </span><span class="na">log_directory=</span><span class="s">&quot;/home/cameo/log&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">&lt;applications&gt;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">        </span><span class="nt">&lt;application</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;App1&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;My application&quot;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">                     </span><span class="na">working_directory=</span><span class="s">&quot;&quot;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">                     </span><span class="na">starting_time=</span><span class="s">&quot;inf&quot;</span><span class="w"> </span><span class="na">stopping_time=</span><span class="s">&quot;20&quot;</span><span class="w"> </span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">                     </span><span class="na">multiple=</span><span class="s">&quot;no&quot;</span><span class="w"> </span><span class="na">restart=</span><span class="s">&quot;no&quot;</span><span class="w"> </span><span class="na">info_arg=</span><span class="s">&quot;yes&quot;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">                     </span><span class="na">stream=</span><span class="s">&quot;yes&quot;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">                     </span><span class="na">log_directory=</span><span class="s">&quot;default&quot;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">                     </span><span class="na">environment=</span><span class="s">&quot;app.properties&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">            </span><span class="nt">&lt;start</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;/home/cameo/app1&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-option test&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="nt">&lt;/application&gt;</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="nt">&lt;application</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;App2&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">            </span><span class="nt">&lt;start</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;/home/cameo/app2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">            </span><span class="nt">&lt;stop</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;kill&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">            </span><span class="nt">&lt;error</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;bash&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;/home/cameo/error.sh -debug&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">        </span><span class="nt">&lt;/application&gt;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="nt">&lt;applications&gt;</span><span class="w">  </span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="nt">&lt;/config&gt;</span>
</span></code></pre></div></p>
<p>The root tag is <em>config</em> which has the <em>applications</em> tag as child which has many <em>application</em> tags as children. Each <em>application</em> tag has a mandatory <em>start</em> child tag and optional <em>stop</em> and <em>error</em> children.</p>
<p>Attributes of the <em>config</em> tag:</p>
<table>
<thead>
<tr>
<th><strong>Attribute</strong></th>
<th><strong>Default value</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>host</td>
<td>The default interface</td>
<td>Hostname or "IP" or an IPv4 address or localhost to override the default interface. If "IP" then the IPv4 address related to localhost is provided.</td>
</tr>
<tr>
<td>port</td>
<td>7000</td>
<td>The base port of the server.</td>
</tr>
<tr>
<td>proxy_ports</td>
<td></td>
<td>The three ports used by the proxy. The first two ports are accessible from outside, the third one is for internal use. By default, proxies are not started.</td>
</tr>
<tr>
<td>polling_time</td>
<td>100</td>
<td>Sleep duration in milliseconds between some phases of the lifecycle of an app and sleep duration in the output stream retrieval of an app.</td>
</tr>
<tr>
<td>sleep_time</td>
<td>5</td>
<td>Sleep duration in milliseconds between two requests process. It avoids the server to stall if there are two many pending requests.</td>
</tr>
<tr>
<td>max_applications</td>
<td>65536</td>
<td>Max number of running apps at a time.</td>
</tr>
<tr>
<td>log_level</td>
<td>INFO</td>
<td>Log level. Possible values are OFF, INFO, FINE, FINER, FINEST.</td>
</tr>
<tr>
<td>log_directory</td>
<td>.</td>
<td>The directory where the file <em>cameo.log</em> is written.</td>
</tr>
</tbody>
</table>
<p>Attributes of the <em>application</em> tag:</p>
<table>
<thead>
<tr>
<th><strong>Attribute</strong></th>
<th><strong>Default value</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td></td>
<td>The name of the app, given when a <em>start</em> is requested. This is a mandatory attribute.</td>
</tr>
<tr>
<td>description</td>
<td></td>
<td>The description of the app.</td>
</tr>
<tr>
<td>working_directory</td>
<td>.</td>
<td>The directory where the app is executed.</td>
</tr>
<tr>
<td>starting_time</td>
<td>0</td>
<td>The duration in seconds after which the app becomes <em>RUNNING</em>. Possible value is a positive integer or <em>inf</em> for infinity.</td>
</tr>
<tr>
<td>stopping_time</td>
<td>10</td>
<td>The duration in seconds after which the app is killed when a <em>stop</em> is requested. Possible value is a positive integer or <em>inf</em> for infinity.</td>
</tr>
<tr>
<td>multiple</td>
<td>inf</td>
<td>If <em>no</em>, then only one instance is accepted. If <em>yes</em> or <em>inf</em>, there is no limit on the number of parallel instances. A number indicates the maximum of parallel instances. Possible values are <em>yes</em>, <em>no</em>, <em>inf</em> or a strictly positive number.</td>
</tr>
<tr>
<td>restart</td>
<td>no</td>
<td>If <em>yes</em>, the app is automatically restarted when it died unexpectedly. Possible values are <em>yes</em> and <em>no</em>.</td>
</tr>
<tr>
<td>info_arg</td>
<td>yes</td>
<td>If <em>yes</em>, an additional argument containing information about the app is passed. For unmanaged application, it can be necessary to set it to <em>no</em>. Possible values are <em>yes</em> and <em>no</em>.</td>
</tr>
<tr>
<td>stream</td>
<td>yes</td>
<td>If <em>yes</em>, the standard error and output stream are published to the console application and other instance reference objects. Possible values are <em>yes</em> and <em>no</em>.</td>
</tr>
<tr>
<td>log_directory</td>
<td></td>
<td>The directory where the <em>&lt;name&gt;.&lt;id&gt;.log</em> file of the app instance is written. An empty value means no log, a <em>default</em> value means it inherits the value of the <em>config</em> tag.</td>
</tr>
<tr>
<td>environment</td>
<td></td>
<td>The environment file where environment variables dedicated to the app can be defined.</td>
</tr>
</tbody>
</table>
<p>Attributes of the <em>start</em>, <em>stop</em>, <em>error</em> tags:</p>
<table>
<thead>
<tr>
<th><strong>Attribute</strong></th>
<th><strong>Default value</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>executable</td>
<td></td>
<td>The path to the program executed.</td>
</tr>
<tr>
<td>args</td>
<td></td>
<td>The arguments passed to the executable.</td>
</tr>
</tbody>
</table>
<p>The <em>start</em> tag is mandatory, the associated executable program is executed when a <em>start</em> is requested. The arguments <em>args</em> are first set then come the arguments passed to the <em>start</em> request and then the last argument is added if <em>info_arg</em> is <em>yes</em>. </p>
<p>When the <em>stop</em> tag is defined, a <em>stop</em> command is executed corresponding to the executable with the arguments <em>args</em>. It can be useful for programs that can be stopped nicely with a signal. However for managed CAMEO apps, it is better to define a stop handler that is automatically triggered when a <em>stop</em> is requested.</p>
<p>When the <em>error</em> tag is defined, an <em>error</em> command is executed when the application finishes with an error. That can be a segmentation fault for a C++ program or an exception for a Java program. In that case, the error can be processed e.g. analyze the generated core to send an email.</p>
<h2 id="environment-files">Environment files</h2>
<p>An application often depends on environment variables. When an application is launched on a local account, some specific environment variables may have been defined. However when the application is launched by a CAMEO server, it may not work, because some environment variables are missing. Indeed the environment is not the one of the local account even if the CAMEO server is launched as a user service. The <em>environment files</em> are there to solve this problem.</p>
<p>An example with the <em>app.properties</em> file:
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>MYAPP_HOME=/home/cameo/myapp
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>LD_LIBRARY_PATH=/usr/local/lib
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>PATH=/home/cameo/bin:$PATH
</span></code></pre></div></p>
<p>The variables are written using a standard <em>shell</em> syntax, and composition is possible. These variables are applied to the context of the launched process. So be careful with the special <em>PATH</em> variable: it cannot be the path of the executable. However if you need to execute a program inside your app, then this <em>PATH</em> will be used. Be also careful with <em>LD_LIBRARY_PATH</em> which is for security reason not inherited. It means that it is empty by default.</p>
<p>If your app has a graphical user interface, you may need to check the variable <em>DISPLAY</em> and add it to the environment file if necessary.</p>
<p>One practical way to check the required environment variables is to launch the app in a working environment e.g. on a local account and print the list of environment variables.</p>
<h2 id="log">Log</h2>
<p>The CAMEO server application is logging in the <em>cameo.log</em> file and it is also possible to log the standard error and output of the applications started by the CAMEO server.</p>
<p>Indeed when you need to debug an application, the standard error and output may be useful. 
CAMEO applications are started in background and it is possible to log the standard error and output. For that, you need to define the <em>log_directory</em> attribute of the application tag with a path that exists or the <em>default</em> value which is the location of the <em>cameo.log</em> file. Each running CAMEO application has a unique id provided by the server and the produced log file is <em>&lt;name&gt;.&lt;id&gt;.log</em> for an app with the name <em>name</em> and id <em>id</em>. For instance it could be <em>App2.12.log</em>.</p>
<h2 id="start-the-server">Start the server</h2>
<p>Once the configuration file and its associated environment files have been defined, the CAMEO server can be started. The server can be started directly in a shell however it is recommended to start it as a service. See the <a href="../installation/">Installation</a> page for more details.</p>
<h2 id="registered-and-unregistered-apps">Registered and unregistered apps</h2>
<p>CAMEO is very flexible and accepts different combinations for an application to be controlled by CAMEO.</p>
<h3 id="this-initialized-with-the-arguments-variable"><em>This</em> initialized with the <em>arguments</em> variable</h3>
<p>Usually to benefit from the CAMEO services inside an application, the <em>This</em> object is initialized by passing the arguments of the program. In C++:
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="c1">// Initialize This.</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="n">cameo</span><span class="o">::</span><span class="n">This</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
</span></code></pre></div></p>
<p>In Java:
<div class="language-java highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">eu.ill.cameo.base.This</span><span class="p">;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="c1">// Initialize This.</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="n">This</span><span class="p">.</span><span class="na">init</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
</span></code></pre></div></p>
<p>In Python:
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">import</span> <span class="nn">cameopy</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1">## Initialize This.</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="n">cameopy</span><span class="o">.</span><span class="n">This</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
</span></code></pre></div></p>
<p>Once <em>This</em> is initialized it can be used for example to get a reference to the CAMEO server that started it. When <em>This</em> is initialized with the <em>arguments</em> variable, there are two cases:</p>
<ul>
<li><strong>Registered application</strong>: If the application is registered in the configuration file, then <em>info_arg</em> must be <em>yes</em> which is the default value so it is not necessary to specify it. Otherwise the application will not start.</li>
<li><strong>Not registered application</strong>: If the application is not registered in the configuration file, it is possible to start directly the app by adding a last argument that contains the CAMEO server reference and its name. For instance:
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>/home/cameo/app1 &quot;{\&quot;name\&quot;:\&quot;App1\&quot;, \&quot;server\&quot;:\&quot;tcp://localhost:10000\&quot;}&quot;
</span></code></pre></div>
Then if the passed arguments are correct, <em>This</em> will initialize and the application will become <strong>attached</strong> to the CAMEO server referenced by the endpoint in the <em>server</em> value.</li>
</ul>
<h3 id="this-initialized-with-explicit-arguments"><em>This</em> initialized with explicit arguments</h3>
<p>It is not mandatory to initialize <em>This</em> with the program arguments. It is possible to pass an explicit endpoint that must be a <strong>local</strong> endpoint because it has no sense to attach the app to a remote computer.<br />
In C++:
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">cameo</span><span class="o">::</span><span class="n">This</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="s">&quot;App1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tcp://localhost:10000&quot;</span><span class="p">);</span>
</span></code></pre></div>
In Java:
<div class="language-java highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">This</span><span class="p">.</span><span class="na">init</span><span class="p">(</span><span class="s">&quot;App1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tcp://localhost:10000&quot;</span><span class="p">);</span>
</span></code></pre></div>
In Python:
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">cameopy</span><span class="o">.</span><span class="n">This</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s2">&quot;App1&quot;</span><span class="p">,</span> <span class="s2">&quot;tcp://localhost:10000&quot;</span><span class="p">)</span>
</span></code></pre></div>
In that case, the application shall <strong>not</strong> be <strong>registered</strong>.</p>
<h3 id="this-not-initialized"><em>This</em> not initialized</h3>
<p>If you have a black box application i.e. that you cannot compile or modify, then you cannot initialize <em>This</em> inside but you can still <strong>register</strong> the application in the configuration file. However it is recommended in that special case to set <em>info_arg</em> to <em>no</em>. Otherwise the additional argument may not be supported by the app when it parses the arguments.</p>
<h3 id="registered-vs-unregistered">Registered vs unregistered</h3>
<p>We saw the different cases based on the initialization of <em>This</em> or not. But what is the difference between a registered app and an unregistered app that is attached?  </p>
<p>The response is simple: a registered app can be started by the console <em>cmo</em> from another computer. Moreover in case of unexpected termination a program can be run to make a report.  </p>
<p>Registering an app offers more flexibility in the way to start an app.</p>
<h2 id="register-a-script">Register a script</h2>
<p>If you want to register a script e.g. a Bash script or a Python script, it is highly recommended to define the executable with the interpreter program rather the script itself even if it is executable. For example:
<div class="language-xml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nt">&lt;config</span><span class="w"> </span><span class="na">host=</span><span class="s">&quot;mycomputer&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="nt">&lt;applications&gt;</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">        </span><span class="nt">&lt;application</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Script1&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">            </span><span class="nt">&lt;start</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;/usr/bin/bash&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;/home/cameo/app1.sh&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">        </span><span class="nt">&lt;/application&gt;</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">        </span><span class="nt">&lt;application</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Script2&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">            </span><span class="nt">&lt;start</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;/usr/bin/python3&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-u /home/cameo/app2.py&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">        </span><span class="nt">&lt;/application&gt;</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="nt">&lt;applications&gt;</span><span class="w">  </span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="nt">&lt;/config&gt;</span>
</span></code></pre></div>
The reason is because the underlying process execution works not well when the executable is the script.</p>
<h2 id="ports">Ports</h2>
<p>The implementation of a CAMEO server is based on ZeroMQ and a sockets of different types are open. Here are the different ports:</p>
<ul>
<li><strong>Base</strong>: This is the port of the server endpoint. By default it is 7000 but it can be defined by the <em>port</em> attribute in the configuration file.</li>
<li><strong>Status</strong>: This is the port from which are published the events of status of the different running applications.</li>
<li><strong>Stream</strong>: Each application for which the attribute <em>stream</em> is set to <em>yes</em> publishes the standard error and output on a stream port.</li>
<li><strong>Coms</strong>: We will see later that the provided coms also use some ports for their implementation.</li>
<li><strong>Proxy</strong>: The ports used by the proxies. See section <a href="../use-the-proxies-with-a-firewall/">Use the proxies with a firewall</a> for more details.</li>
</ul>
<p>Except the base port and the proxy ports that are fixed meaning that they must be free before starting the CAMEO server, all the other ports are <strong>dynamically assigned</strong> i.e. they will surely assigned.</p>
<h2 id="stop-and-error-executables">Stop and error executables</h2>
<p>If you need to define a stop executable then you can send a signal to the process of the application. For instance:
<div class="language-xml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">&lt;stop</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;kill&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-2&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
The <em>PID</em> of the running application is added as a last argument.</p>
<p>If you need to define an error executable, you can for instance define:
<div class="language-xml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">&lt;error</span><span class="w"> </span><span class="na">executable=</span><span class="s">&quot;bash&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;/home/cameo/error.sh -debug&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
If the running application terminates with an error the following arguments will be added to the command executed: id, error code, state before the error. For instance:
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>bash /home/cameo/error.sh -debug 13 139 RUNNING
</span></code></pre></div>
These information can be used to send a report by email.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ebd0bdb7.min.js"></script>
      
    
  </body>
</html>